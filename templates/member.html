{%extends "layout.html"%}
{% block title %}Students Page{% endblock %}

{% block head %}
<link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/dashboard/">
<link rel="stylesheet" href="{{url_for('static', filename = 'table.css')}}">
{% endblock head %}
    
{%block content%}


<script>
    $(document).ready(function(){
      $("#input").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("#mytable tr").filter(function() {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
    });

     $(document).ready(function () {
     var $rows = $('tbody#mytable tr')
   
      var $filters = $('.table-filter').change(function(){
       var filterArr = $filters.filter(function(){
          return this.value
       }).map(function(){
          var $el = $(this);
          var value = $el.is('select') ? $el.find(':selected').text() :$el.val()  
          return {
            col: $el.data('col'),
            value: value.toLowerCase()
          }
       }).get();
       if(!filterArr.length){
         $rows.show()
       }else{
         $rows.hide().filter(function(){
            var $row = $(this)
            return filterArr.every(function(filterObj, i){
               var cellText = $row.find('td').eq(filterObj.col).text().toLowerCase();             
              return  cellText.includes(filterObj.value);
            })
         }).show()
       }
     })
    });


</script> 


<div class="container-fluid">
  <h1>Student Information List</h1>
    <form action="/member_upload" method="POST" enctype="multipart/form-data">
        <input type="file" id="file" name="file">
        <button type="submit" id="btn">submit</button>
    </form>
    </br>

    <div class="row">
        <div class="col">
          <input type="text" id="input" onkeyup="myFunction()" placeholder="Search for key words...">
        </div>
    </div>

    <div class="row">
        <div class="col-md-2">
            <h4>School</h4>
           <select id="schoolfilter" name="schoolfilter" class="table-filter form-control">
             <option value="">Select one</option>    
             {% for col in school_id %}
                {% for result in col%}       
                <option value="{{result}}">{{result}}</option>
                {% endfor %}
             {% endfor %}
            </select>

        </div>
        <div class="col-md-3">
            <h4>Gender</h4>
            <select id="genderfilter" name="genderfilter" class="table-filter form-control">
                <option value="">Select one</option>         
                   <option value="Female">Female</option>
                   <option value="Male">Male</option>
               </select>
        </div>
        <div class="col-md-3">
            <h4>Age</h4>
            <input type="text" class="form-control" id="table-filter form-control">
        </div>
        <div class="col-md-3">
            <h4>Ethnicity</h4>
            <input type="text" class="form-control" id="table-filter form-control">
        </div>
        <div class="col-md-2">
            <h4>Service</h4>
           <select id="servicefilter" name="servicefilter" class="table-filter form-control"  data-col="3">
             <option value="">Select one</option>
             <option value="1">Test service</option><option value="2">Test2 service</option></select>
        </div>
    </div>
    <div class="table-responsive">
    <table class="table table-striped table-hover table-sm" style="font-size: .875rem">
        <thead>
            <tr>
                <th scope="col">Member ID</th>
                <th scope="col">School ID</th>
                <th scope="col">First Name</th>
                <th scope="col">Last Name</th>
                <th scope="col">Username</th>
                <th scope="col">Password</th>
                <th scope="col">Gender</th>
                <th scope="col">Age</th>
                <th scope="col">Ethnicity</th>
                <th scope="col">Continuing/New</th>
                <th scope="col">Passport Number</th>
                <th scope="col">Previous Hours</th>
                <th scope="col">Passport Date Issued </th>
                <th scope="col">Ethnicity info</th>
                <th scope="col">Teaching Research</th>
                <th scope="col">Pubilication Promos</th>
                <th scope="col">Social Media</th>
                {% if date %}
                <th scope="col">{{date}} Hours Total</th>
                {% endif %}
                <th scope="col">Gown Size</th>
                <th scope="col">Hat Size</th>
                <th scope="col">Status</th>
            </tr>
        </thead>
        <tbody id="mytable">
            {% for item in result %}
            <tr> 
                {% for col in item %}
                <td>{{col}}</td>
                {% endfor %}
            </tr>
            {%endfor%}
        </tbody>
    </table>
    </div>
</div>

    {%endblock%}
    
