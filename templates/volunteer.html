{%extends "layout.html"%}
{%block title%} Volunteers {%endblock%}
{%block head%}
<link rel="stylesheet" href="{{url_for('static', filename = 'volunteer.css')}}">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">
<link rel="stylesheet" href="{{url_for('static', filename = 'layout.css')}}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.js"></script>
{%endblock%}

{%block content%}
<div class="container-fluid">
    <h1>Volunteers</h1>
    <form action="/volunteer_upload" method="POST" enctype="multipart/form-data">
        <div class="input-group mb-3">
            <label class="input-group-text" for="inputGroupFile01">Upload</label>
            <input type="file" class="form-control" id="inputGroupFile01" required name="file">
            <button class="btn btn-secondary" type="submit" id="btn">Submit</button>
        </div>
    </form>
    <div class="input-group mb-3">
        <label class="input-group-text" for="inputGroupFile01">Search</label>
        <input class="form-control" id="myInput" type="text" placeholder="Type keywords here to search...">
    </div>
    <form action="/volunteer" method="POST" class="criteria clearfix">
        <div class="row">
            {% for i in criteria.keys()%}
            <div class="col-sm-2">
                <label for="{{i}}">{{i}}</label>
                <select class="selectpicker" multiple data-live-search="true" id="{{i}}" name="{{i}}">
                    {%for j in criteria[i]%}
                    <option>{{j[0]}}</option>
                    {%endfor%}
                </select> 
            </div>
            {%endfor%}
            <div class="col">
            </br>
                <button class="btn btn-secondary float-end" type="submit" role="button">Filter</button>
                <a class="btn btn-secondary float-end clickable" data-href="/volunteer">Reset</a>
            </div>
        </div>
    </form>
    <a href="{{ url_for('add_volunteer') }}" type="button" role="button" class="btn btn-secondary float-end">Add Volunteer</a>
    <table class="table-striped table-hover paginated" id="volunteer">
        <thead style="background-color: #F3D712;">
            <tr>
                <th>ID</th>
                <th>Status</th>
                <th>Induction</th>
                <th>Interview</th>
                <th>Name</th>
                <th>Gender</th>
                <th>Volunteer Experience</th>
                <th>Future Leader</th>
                <th>Police Check</th>
                <th>University</th>
                <th>Course</th>
                <th>Current Year</th>
                <th>Completion Date</th>
            </tr>
        </thead>
        <tbody id="tbody">
            {%for i in voluns%}
            <tr class="clickable" data-href="/edit_volunteer?id={{i.id}}" style="cursor: pointer;">
                <td>{{i.id}}</td>
                <td>{{i.status}}</td>
                <td>{{i.induction}}</td>
                <td>{{i.interview}}</td>
                <td>{{i.firstname}} {{i.surname}}</td>
                <td>{{i.gender}}</td>
                <td>{{i.experience}}</td>
                <td>{{i.leader}}</td>
                <td>{{i.police}}</td>
                <td>{{i.uni}}</td>
                <td>{{i.course}}</td>
                <td>{{i.current_year}}</td>
                <td>{{i.comp_date}}</td>
            </tr>
            {%endfor%}
        </tbody>
    </table>
</div>

<script>
    

    $(document).ready(function () {
        $("#myInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });

    $(document).ready(function () {
        $(this).on('click', '.clickable', function () {
            window.document.location = $(this).data("href");
        });
    });

    $(document).ready(function() {
    $('#volunteer').dataTable( {
        "lengthChange": false,
        "searching":false,
    });
});
</script>
{%endblock%}